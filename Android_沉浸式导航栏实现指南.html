<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Android æ²‰æµ¸å¼å¯¼èˆªæ å®ç°æŒ‡å—</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #2980b9;
            margin-top: 25px;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
        }
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
        }
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
        }
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin: 8px 0;
        }
        .emoji {
            font-size: 1.2em;
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
        }
        .toc {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }
        .toc li {
            margin: 5px 0;
        }
        .toc a {
            text-decoration: none;
            color: #007bff;
        }
        .toc a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1><span class="emoji">ğŸ“±</span> Android æ²‰æµ¸å¼å¯¼èˆªæ å®ç°æŒ‡å—</h1>
        
        <div class="toc">
            <h3>ç›®å½•</h3>
            <ul>
                <li><a href="#implementation">ç¬¬ä¸€éƒ¨åˆ†ï¼šå®ç°æ“ä½œæ€»ç»“</a></li>
                <li><a href="#theory">ç¬¬äºŒéƒ¨åˆ†ï¼šEdgeToEdgeåŸç†è§£æ</a></li>
            </ul>
        </div>

        <div id="implementation" class="section">
            <h2><span class="emoji">ğŸ“‹</span> ç¬¬ä¸€éƒ¨åˆ†ï¼šå®ç°åº•éƒ¨å¯¼èˆªæ æ²‰æµ¸å¼æ•ˆæœçš„æ“ä½œæ€»ç»“</h2>
            
            <p>é€šè¿‡ä»¥ä¸‹å…·ä½“æ“ä½œå®ç°äº†ä»…åº•éƒ¨å¯¼èˆªæ çš„æ²‰æµ¸å¼æ•ˆæœï¼š</p>

            <h3>1. AndroidManifest.xml é…ç½®æ›´æ–°</h3>
            <div class="code-block">
&lt;activity
    android:name=".MainActivity"
    android:exported="true"
    android:windowSoftInputMode="adjustResize"
    android:theme="@style/Theme.ColorFeatureEnhance"&gt;
            </div>
            <div class="highlight">
                <strong>ç›®çš„ï¼š</strong>ç¡®ä¿åº”ç”¨èƒ½å¤Ÿæ­£ç¡®æ¥æ”¶è½¯é”®ç›˜IMEçš„insetsä¿¡æ¯ï¼Œæ”¯æŒåŠ¨æ€å¸ƒå±€è°ƒæ•´ã€‚
            </div>

            <h3>2. æ·»åŠ å¿…è¦çš„Compose Insetså¯¼å…¥</h3>
            <div class="code-block">
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.WindowInsets
import androidx.compose.foundation.layout.navigationBars
import androidx.compose.foundation.layout.statusBars
import androidx.compose.foundation.layout.windowInsetsBottomHeight
import androidx.compose.foundation.layout.windowInsetsPadding
            </div>
            <div class="highlight">
                <strong>ç›®çš„ï¼š</strong>å¼•å…¥å¤„ç†ç³»ç»Ÿæ insetsæ‰€éœ€çš„Compose APIã€‚
            </div>

            <h3>3. Scaffoldé…ç½®è°ƒæ•´</h3>
            <div class="code-block">
Scaffold(
    topBar = {
        Column {  // ç§»é™¤çŠ¶æ€æ paddingï¼Œä¿æŒæ­£å¸¸æ˜¾ç¤º
            // TopAppBarå†…å®¹
        }
    },
    floatingActionButton = {
        FloatingActionButton(
            modifier = Modifier.windowInsetsPadding(WindowInsets.navigationBars)
        ) { /* FABå†…å®¹ */ }
    },
    contentWindowInsets = WindowInsets.statusBars  // ä»…å¤„ç†çŠ¶æ€æ insets
)
            </div>
            
            <div class="success">
                <strong>å…³é”®ç‚¹ï¼š</strong>
                <ul>
                    <li><strong>TopAppBarï¼š</strong>ç§»é™¤çŠ¶æ€æ paddingï¼Œæ¢å¤æ­£å¸¸æ˜¾ç¤º</li>
                    <li><strong>FABï¼š</strong>æ·»åŠ å¯¼èˆªæ paddingï¼Œé¿å…è¢«é®æŒ¡</li>
                    <li><strong>contentWindowInsetsï¼š</strong>ä»…å¤„ç†çŠ¶æ€æ ï¼Œè®©åº•éƒ¨å¯¼èˆªæ å®ç°æ²‰æµ¸å¼</li>
                </ul>
            </div>

            <h3>4. LazyColumnå†…å®¹å¤„ç†</h3>
            <div class="code-block">
LazyColumn(
    modifier = Modifier.padding(innerPadding),  // ä½¿ç”¨æ­£å¸¸çš„innerPadding
    contentPadding = PaddingValues(horizontal = 20.dp, vertical = 16.dp)
) {
    // åˆ—è¡¨é¡¹...
    
    // å…³é”®ï¼šæ·»åŠ åº•éƒ¨Spacerå®ç°æ²‰æµ¸å¼æ•ˆæœ
    item {
        Spacer(
            Modifier.windowInsetsBottomHeight(WindowInsets.navigationBars)
        )
    }
}
            </div>
            
            <div class="success">
                <strong>æ ¸å¿ƒæœºåˆ¶ï¼š</strong>
                <ul>
                    <li>LazyColumnä½¿ç”¨æ­£å¸¸çš„innerPaddingå¤„ç†çŠ¶æ€æ </li>
                    <li>åº•éƒ¨æ·»åŠ Spacerï¼Œé«˜åº¦ç­‰äºå¯¼èˆªæ é«˜åº¦</li>
                    <li>å®ç°å†…å®¹å¯ä»¥æ»šåŠ¨åˆ°å¯¼èˆªæ åé¢çš„è§†è§‰æ•ˆæœ</li>
                </ul>
            </div>

            <h3>5. æ¸…ç†ä¸éœ€è¦çš„å¯¼å…¥</h3>
            <p>ç§»é™¤äº†ä¸å†ä½¿ç”¨çš„å¯¼å…¥ï¼šWindowInsetsSidesã€safeDrawingã€onlyã€asPaddingValuesã€calculateBottomPadding</p>

            <h3><span class="emoji">ğŸ¯</span> å®ç°åŸç†</h3>
            
            <h4>çŠ¶æ€æ å¤„ç†</h4>
            <ul>
                <li>ä¿æŒScaffoldçš„é»˜è®¤çŠ¶æ€æ å¤„ç†ï¼ˆcontentWindowInsets = WindowInsets.statusBarsï¼‰</li>
                <li>TopAppBaræ­£å¸¸æ˜¾ç¤ºï¼Œä¸è¢«çŠ¶æ€æ é®æŒ¡</li>
            </ul>

            <h4>åº•éƒ¨å¯¼èˆªæ æ²‰æµ¸å¼</h4>
            <ul>
                <li>Scaffoldä¸å¤„ç†åº•éƒ¨å¯¼èˆªæ insetsï¼ˆé€šè¿‡contentWindowInsetsé…ç½®ï¼‰</li>
                <li>LazyColumnå†…å®¹å¯ä»¥å»¶ä¼¸åˆ°å¯¼èˆªæ åŒºåŸŸ</li>
                <li>åº•éƒ¨Spacerç¡®ä¿æœ€åçš„å†…å®¹å¯ä»¥æ»šåŠ¨åˆ°å¯¼èˆªæ ä¸Šæ–¹ï¼Œå®ç°é€è¿‡æ•ˆæœ</li>
                <li>FABé€šè¿‡windowInsetsPadding(WindowInsets.navigationBars)é¿å…è¢«é®æŒ¡</li>
            </ul>

            <div class="success">
                <h4>æœ€ç»ˆæ•ˆæœ</h4>
                <ul>
                    <li><span class="emoji">âœ…</span> <strong>çŠ¶æ€æ ï¼š</strong>æ­£å¸¸æ˜¾ç¤ºï¼ŒåŠŸèƒ½å®Œæ•´</li>
                    <li><span class="emoji">âœ…</span> <strong>åº•éƒ¨å¯¼èˆªæ ï¼š</strong>æ²‰æµ¸å¼æ•ˆæœï¼Œå†…å®¹å¯æ»šåŠ¨åˆ°åé¢</li>
                    <li><span class="emoji">âœ…</span> <strong>äº¤äº’å…ƒç´ ï¼š</strong>FABç­‰é‡è¦å…ƒç´ ä¸è¢«é®æŒ¡</li>
                    <li><span class="emoji">âœ…</span> <strong>å…¼å®¹æ€§ï¼š</strong>æ”¯æŒæ·±è‰²æ¨¡å¼å’Œè½¯é”®ç›˜</li>
                </ul>
            </div>
        </div>

        <div id="theory" class="section">
            <h2><span class="emoji">ğŸ¤”</span> ç¬¬äºŒéƒ¨åˆ†ï¼šä¸ºä»€ä¹ˆEdgeToEdgeæ— æ³•ç›´æ¥å®ç°æ²‰æµ¸å¼æ•ˆæœ</h2>

            <h3>enableEdgeToEdge() çš„å®é™…ä½œç”¨</h3>
            
            <h4>enableEdgeToEdge() åšäº†ä»€ä¹ˆï¼š</h4>
            <ol>
                <li><strong>ç³»ç»Ÿçº§è®¾ç½®ï¼š</strong>å‘Šè¯‰Androidç³»ç»Ÿå…è®¸åº”ç”¨å†…å®¹ç»˜åˆ¶åˆ°ç³»ç»Ÿæ åŒºåŸŸ</li>
                <li><strong>çª—å£æ ‡å¿—ï¼š</strong>è®¾ç½®LAYOUT_STABLE | LAYOUT_FULLSCREEN | LAYOUT_HIDE_NAVIGATIONç­‰æ ‡å¿—</li>
                <li><strong>ç³»ç»Ÿæ æ ·å¼ï¼š</strong>è‡ªåŠ¨è°ƒæ•´çŠ¶æ€æ å’Œå¯¼èˆªæ çš„é¢œè‰²ä»¥åŒ¹é…åº”ç”¨ä¸»é¢˜</li>
            </ol>

            <div class="error">
                <h4>enableEdgeToEdge() æ²¡æœ‰åšä»€ä¹ˆï¼š</h4>
                <ul>
                    <li><span class="emoji">âŒ</span> <strong>ä¸ä¼šè‡ªåŠ¨å¤„ç†å†…å®¹å¸ƒå±€</strong></li>
                    <li><span class="emoji">âŒ</span> <strong>ä¸ä¼šè‡ªåŠ¨æ·»åŠ paddingé¿å…é®æŒ¡</strong></li>
                    <li><span class="emoji">âŒ</span> <strong>ä¸ä¼šæ§åˆ¶å“ªäº›åŒºåŸŸæ²‰æµ¸ã€å“ªäº›åŒºåŸŸä¸æ²‰æµ¸</strong></li>
                </ul>
            </div>

            <h3><span class="emoji">ğŸ”</span> ä¸ºä»€ä¹ˆéœ€è¦é¢å¤–çš„Composeé…ç½®</h3>

            <h4>ä»…ä½¿ç”¨ enableEdgeToEdge() çš„æ•ˆæœï¼š</h4>
            <div class="code-block">
// MainActivityä¸­å·²ç»è°ƒç”¨äº†enableEdgeToEdge()
// ä½†Scaffoldé»˜è®¤ä¼šè¿™æ ·å¤„ç†ï¼š

Scaffold(
    topBar = { TopAppBar(...) },
    content = { innerPadding ->
        LazyColumn(
            modifier = Modifier.padding(innerPadding)  // è¿™é‡Œä¼šæ·»åŠ æ‰€æœ‰ç³»ç»Ÿæ çš„padding
        )
    }
)
            </div>

            <div class="warning">
                <strong>ç»“æœï¼š</strong>
                <ul>
                    <li><span class="emoji">âœ…</span> ç³»ç»Ÿå…è®¸å†…å®¹ç»˜åˆ¶åˆ°ç³»ç»Ÿæ åŒºåŸŸ</li>
                    <li><span class="emoji">âŒ</span> ä½†Scaffoldçš„innerPaddingåŒ…å«äº†<strong>çŠ¶æ€æ å’Œå¯¼èˆªæ </strong>çš„padding</li>
                    <li><span class="emoji">âŒ</span> LazyColumnè¢«æ¨åˆ°äº†å®‰å…¨åŒºåŸŸå†…ï¼Œæ— æ³•å®ç°æ²‰æµ¸å¼æ•ˆæœ</li>
                </ul>
            </div>

            <h4>æˆ‘ä»¬çš„è‡ªå®šä¹‰é…ç½®ï¼š</h4>
            <div class="code-block">
Scaffold(
    contentWindowInsets = WindowInsets.statusBars,  // åªå¤„ç†çŠ¶æ€æ 
    content = { innerPadding ->
        LazyColumn(
            modifier = Modifier.padding(innerPadding)  // ç°åœ¨innerPaddingåªåŒ…å«çŠ¶æ€æ 
        ) {
            // å†…å®¹...
            item {
                Spacer(Modifier.windowInsetsBottomHeight(WindowInsets.navigationBars))
            }
        }
    }
)
            </div>

            <div class="success">
                <strong>ç»“æœï¼š</strong>
                <ul>
                    <li><span class="emoji">âœ…</span> çŠ¶æ€æ æ­£å¸¸å¤„ç†ï¼ˆæœ‰paddingï¼‰</li>
                    <li><span class="emoji">âœ…</span> å¯¼èˆªæ å®ç°æ²‰æµ¸å¼ï¼ˆæ— paddingï¼Œå†…å®¹å¯ä»¥æ»šåŠ¨åˆ°åé¢ï¼‰</li>
                </ul>
            </div>

            <h3><span class="emoji">ğŸ“Š</span> æŠ€æœ¯å±‚é¢çš„è§£é‡Š</h3>

            <h4>Scaffoldçš„é»˜è®¤è¡Œä¸ºï¼š</h4>
            <div class="code-block">
// Scaffoldå†…éƒ¨é€»è¾‘ï¼ˆç®€åŒ–ç‰ˆï¼‰
val contentWindowInsets = WindowInsets.systemBars  // é»˜è®¤åŒ…å«çŠ¶æ€æ +å¯¼èˆªæ 
val innerPadding = contentWindowInsets.asPaddingValues()  // è½¬æ¢ä¸ºpadding

// è¿™æ„å‘³ç€innerPaddingåŒ…å«ï¼š
// - top: çŠ¶æ€æ é«˜åº¦
// - bottom: å¯¼èˆªæ é«˜åº¦
// - left/right: åˆ˜æµ·å±ç­‰å®‰å…¨åŒºåŸŸ
            </div>

            <h4>æˆ‘ä»¬çš„è‡ªå®šä¹‰é…ç½®ï¼š</h4>
            <div class="code-block">
// æˆ‘ä»¬çš„é…ç½®
contentWindowInsets = WindowInsets.statusBars  // åªåŒ…å«çŠ¶æ€æ 

// ç°åœ¨innerPaddingåªåŒ…å«ï¼š
// - top: çŠ¶æ€æ é«˜åº¦
// - bottom: 0 (å¯¼èˆªæ ä¸å¤„ç†)
// - left/right: å®‰å…¨åŒºåŸŸ
            </div>

            <h3><span class="emoji">ğŸ¯</span> å…³é”®ç†è§£</h3>
            
            <div class="highlight">
                <p><code>enableEdgeToEdge()</code>åªæ˜¯<strong>å…è®¸</strong>ä½ çš„åº”ç”¨ç»˜åˆ¶åˆ°ç³»ç»Ÿæ åŒºåŸŸï¼Œä½†<strong>å¦‚ä½•å¸ƒå±€å†…å®¹</strong>å®Œå…¨ç”±ä½ çš„Composeä»£ç å†³å®šã€‚</p>
                
                <p><strong>ç±»æ¯”ï¼š</strong></p>
                <ul>
                    <li><code>enableEdgeToEdge()</code> = å‘Šè¯‰æˆ¿ä¸œ"æˆ‘å¯ä»¥ä½¿ç”¨æ•´ä¸ªæˆ¿é—´"</li>
                    <li>Composeé…ç½® = å†³å®š"å®¶å…·å…·ä½“æ”¾åœ¨æˆ¿é—´çš„å“ªä¸ªä½ç½®"</li>
                </ul>
            </div>

            <h3><span class="emoji">ğŸ”§</span> ä¸ºä»€ä¹ˆéœ€è¦ç²¾ç»†æ§åˆ¶</h3>

            <p>ä¸åŒçš„åº”ç”¨åœºæ™¯éœ€è¦ä¸åŒçš„æ²‰æµ¸å¼ç­–ç•¥ï¼š</p>
            
            <ol>
                <li><strong>å…¨æ²‰æµ¸å¼ï¼š</strong>è§†é¢‘æ’­æ”¾å™¨ï¼ˆçŠ¶æ€æ +å¯¼èˆªæ éƒ½éšè—ï¼‰</li>
                <li><strong>ä»…åº•éƒ¨æ²‰æµ¸å¼ï¼š</strong>æˆ‘ä»¬çš„åº”ç”¨ï¼ˆä¿æŒçŠ¶æ€æ ï¼Œæ²‰æµ¸å¯¼èˆªæ ï¼‰</li>
                <li><strong>ä»…é¡¶éƒ¨æ²‰æµ¸å¼ï¼š</strong>æŸäº›é˜…è¯»åº”ç”¨ï¼ˆæ²‰æµ¸çŠ¶æ€æ ï¼Œä¿æŒå¯¼èˆªæ ï¼‰</li>
                <li><strong>æ— æ²‰æµ¸å¼ï¼š</strong>ä¼ ç»Ÿåº”ç”¨ï¼ˆéƒ½ä¸æ²‰æµ¸ï¼‰</li>
            </ol>

            <div class="success">
                <p><code>enableEdgeToEdge()</code>ä¸ºæ‰€æœ‰è¿™äº›åœºæ™¯æä¾›äº†<strong>åŸºç¡€èƒ½åŠ›</strong>ï¼Œä½†å…·ä½“çš„<strong>å¸ƒå±€ç­–ç•¥</strong>éœ€è¦é€šè¿‡Composeçš„WindowInsets APIæ¥ç²¾ç¡®æ§åˆ¶ã€‚</p>
                
                <p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨é…ç½®<code>contentWindowInsets</code>ã€<code>windowInsetsPadding</code>ç­‰APIçš„åŸå› ï¼</p>
            </div>
        </div>

        <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #dee2e6; text-align: center; color: #6c757d;">
            <p>Android æ²‰æµ¸å¼å¯¼èˆªæ å®ç°æŒ‡å— - ç”Ÿæˆæ—¶é—´ï¼š2025å¹´1æœˆ</p>
        </footer>
    </div>
</body>
</html>
